var a=Object.defineProperty,k=Object.defineProperties,m=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertyNames,o=Object.getOwnPropertySymbols;var f=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var c=(n,t,r)=>t in n?a(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,l=(n,t)=>{for(var r in t||(t={}))f.call(t,r)&&c(n,r,t[r]);if(o)for(var r of o(t))x.call(t,r)&&c(n,r,t[r]);return n},d=(n,t)=>k(n,w(t));var I=(n,t)=>{for(var r in t)a(n,r,{get:t[r],enumerable:!0})},M=(n,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of h(t))!f.call(n,e)&&e!==r&&a(n,e,{get:()=>t[e],enumerable:!(s=m(t,e))||s.enumerable});return n};var O=n=>M(a({},"__esModule",{value:!0}),n);var C={};I(C,{Callable:()=>y,SPECIAL_KEY:()=>i,Source:()=>_,createSource:()=>v});module.exports=O(C);var i="__PROVIDER_ID__",y=class extends Function{constructor(){super();let t;return t=(...r)=>t.__call(...r),Object.setPrototypeOf(t,new.target.prototype)}},_=class extends y{constructor(r,s,e,p){super();this.__call=r;this.__methods=e;this.__onUpdate=[];this.__listeners={};this.call=void 0;for(let u in s)this[u]=s[u];this.muppet=new Proxy({},{get:p.bind(this)})}},v=(n,t,r)=>{function s(e,p){return e[i]&&typeof e[i]=="string"&&p!==e[i]&&(e[e[i]]?e[e[i]]=d(l({},e[e[i]]),{[p]:this[p]!==void 0?this[p]:void 0}):e[e[i]]={[p]:this[p]!==void 0?this[p]:void 0}),e[p]?e[p]:this[p]}return new Proxy(new _(t,n,r,s),{set(e,p,u){if(e[p]=u,e.__listeners[p]&&e.__listeners[p].size)for(let[T,g]of e.__listeners[p])e.muppet[T]&&(e.muppet[T]=d(l({},e.muppet[T]),{[p]:u})),g();return Array.isArray(e.__onUpdate)&&p!=="onUpdate"&&(e.__onUpdate.forEach(T=>T()),e.__onUpdate=[]),!0}})};
