"use client";import{a as f,b as l}from"../chunks/EG57K5XF.chunk.js";import{a as c}from"../chunks/LGHY6XNV.chunk.js";import"../chunks/AP6RJW3C.chunk.js";import{a as u}from"../chunks/TQUNGZOH.chunk.js";import{a as y}from"../chunks/FT6P4UXX.chunk.js";import{b as i}from"../chunks/O3VCMV5J.chunk.js";import d from"react";var p=class{constructor(e,t){this.dependencies=new Map;this.isDisposed=!1;this.onUpdate=(e,t,o)=>{let n=this.dependencies.get(o);n&&n.has(e)&&this.scheduler()};this.name=e,this.scheduler=t}track(e){if(this.isDisposed)return e();for(let t of this.dependencies.values())t.clear();c.push(this);try{return e()}finally{c.pop()}}reportDependency(e,t){if(this.isDisposed)return;let o=this.dependencies.get(e);o||(o=new Set,this.dependencies.set(e,o),e[`${i}onUpdate`].indexOf(this.onUpdate)===-1&&e[`${i}onUpdate`].push(this.onUpdate)),o.add(t)}updateScheduler(e){this.scheduler=e}undispose(){this.isDisposed=!1}dispose(){if(!this.isDisposed){for(let e of this.dependencies.keys()){let t=e[`${i}onUpdate`].indexOf(this.onUpdate);t>-1&&e[`${i}onUpdate`].splice(t,1)}this.dependencies.clear(),this.isDisposed=!0}}};function v(r,e){let t=o=>{let[,n]=d.useReducer(a=>a+1,0),s=d.useRef(null);if(s.current===null){let a=e.displayName||e.name||"Component";s.current=new p(`${a}_Observer`,n)}return s.current.updateScheduler(n),d.useEffect(()=>(s.current.undispose(),()=>s.current.dispose()),[s.current]),s.current.track(()=>e(o))};return t.displayName=`RepkaObserver(${e.displayName||e.name})`,t}function k(r){try{if(typeof r!="string")return v(this,r);if(r)return f(this,r)}catch{return this}}var K=r=>u(r,{main:k,getter:l});export{K as repka,y as watch};
