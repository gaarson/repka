import{a as d}from"../chunks/MU36BVS6.chunk.js";import{a,b as u}from"../chunks/SRBQM72W.chunk.js";import{a as p}from"../chunks/LGHY6XNV.chunk.js";import{a as k}from"../chunks/672NLXAJ.chunk.js";import{b as n}from"../chunks/O3VCMV5J.chunk.js";import{useReducer as v,useRef as T,useEffect as D}from"react";var o=class{constructor(e,r){this.dependencies=new Map;this.isDisposed=!1;this.onUpdate=e=>{for(let[,r]of this.dependencies.entries())if(r.has(e)){this.scheduler();return}};this.name=e,this.scheduler=r}track(e){if(this.isDisposed)return e();p.push(this);try{return e()}finally{p.pop()}}reportDependency(e,r){if(this.isDisposed)return;let i=this.dependencies.get(e);i||(i=new Set,this.dependencies.set(e,i),e[`${n}onUpdate`].push(this.onUpdate)),i.add(r)}updateScheduler(e){this.scheduler=e}undispose(){this.isDisposed=!1}dispose(){if(!this.isDisposed){for(let e of this.dependencies.keys()){let r=e[`${n}onUpdate`].indexOf(this.onUpdate);r>-1&&e[`${n}onUpdate`].splice(r,1)}this.dependencies.clear(),this.isDisposed=!0}}};function S(t,e){let r=i=>{let[,c]=v(R=>R+1,0),s=T(null);return s.current===null&&(s.current=new o(`${e.name}_Observer`,c)),s.current.updateScheduler(c),D(()=>(s.current.undispose(),()=>s.current.dispose()),[s.current]),s.current.track(()=>e(i))};return r.displayName=`RepkaObserver(${e.displayName||e.name})`,r}function H(t){return typeof t=="function"&&/^[A-Z]/.test(t.name)}function y(t){if(t&&typeof t!="string"&&H(t))return S(this,t);try{return a(this,typeof t)}catch{return this}}var X=t=>d(t,{main:y,getter:u});export{X as repka,k as watch};
