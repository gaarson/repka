import{a as d}from"../chunks/F22VXRRR.chunk.js";import{a as u,b as f}from"../chunks/V7FCDOPA.chunk.js";import{a}from"../chunks/LGHY6XNV.chunk.js";import{a as k}from"../chunks/FT6P4UXX.chunk.js";import{b as n}from"../chunks/O3VCMV5J.chunk.js";import{useReducer as y,useRef as v,useEffect as S}from"react";var i=class{constructor(e,t){this.dependencies=new Map;this.isDisposed=!1;this.onUpdate=(e,t)=>{for(let[,o]of this.dependencies.entries())if(o.has(e)){this.scheduler();return}};this.name=e,this.scheduler=t}track(e){if(this.isDisposed)return e();for(let t of this.dependencies.values())t.clear();a.push(this);try{return e()}finally{a.pop()}}reportDependency(e,t){if(this.isDisposed)return;let o=this.dependencies.get(e);o||(o=new Set,this.dependencies.set(e,o),e[`${n}onUpdate`].push(this.onUpdate)),o.add(t)}updateScheduler(e){this.scheduler=e}undispose(){this.isDisposed=!1}dispose(){if(!this.isDisposed){for(let e of this.dependencies.keys()){let t=e[`${n}onUpdate`].indexOf(this.onUpdate);t>-1&&e[`${n}onUpdate`].splice(t,1)}this.dependencies.clear(),this.isDisposed=!0}}};function x(r,e){let t=o=>{let[,c]=y(p=>p+1,0),s=v(null);if(s.current===null){let p=e.displayName||e.name||"Component";s.current=new i(`${p}_Observer`,c)}return s.current.updateScheduler(c),S(()=>(s.current.undispose(),()=>s.current.dispose()),[s.current]),s.current.track(()=>e(o))};return t.displayName=`RepkaObserver(${e.displayName||e.name})`,t}function R(r){try{if(typeof r!="string")return x(this,r);if(r)return u(this,r)}catch{return this}}var L=r=>d(r,{main:R,getter:f});export{L as repka,k as watch};
