import{a as c,b as t,c as $}from"./KFMMTQSC.chunk.js";var o=(e,n)=>(e[`${t}muppet`][c]&&n!==e[`${t}muppet`][c]&&typeof n=="string"&&!n.startsWith(t)&&!e[`${t}methods`][n]&&(e[`${t}muppet`][e[`${t}muppet`][c]]=!1,e[`${t}criticalFields`][e[`${t}muppet`][c]]=[...new Set([...e[`${t}criticalFields`][e[`${t}muppet`][c]]||[],n])]),typeof n=="string"&&n.startsWith(t)||n==="__call"?e[n]:e[`${t}methods`][n]?e[`${t}methods`][n]:e[`${t}getter`]?e[`${t}getter`](n):e[`${t}data`][n]),h=(e,n,l)=>typeof n=="string"&&n.startsWith(t)||n==="__call"?(e[n]=l,!0):(e[`${t}methods`][n]||(e[`${t}data`]={...e[`${t}data`],[n]:l},e[`${t}listeners`][n]&&e[`${t}listeners`][n].size&&e[`${t}listeners`][n].forEach((a,u)=>{e[`${t}muppet`][u]!==void 0&&e[`${t}muppet`][u]===!1&&(e[`${t}muppet`][u]=!0),a()}),e[`${t}onUpdate`].length&&e[`${t}onUpdate`].forEach(a=>a&&a(n))),!0);function y(e){let n=[],l=e;do n.push(...Object.getOwnPropertyNames(l));while(l=Object.getPrototypeOf(l));return n.sort().filter((a,u,f)=>{if(a!=f[u+1]&&typeof e[a]=="function")return!0})}var E=(e,{main:n,getter:l})=>{try{let a=()=>{},u=new $(a),f=new Set(y(e).filter(s=>s!=="constructor"&&typeof e[s]=="function")),m=Object.keys(e).reduce((s,r)=>(f.has(r)||(s[r]=e[r]),s),u),i=new Proxy(m,{set:h,get:o}),d=[...f].reduce((s,r)=>r!=="constructor"&&typeof e[r]=="function"?{...s,[r]:e[r]}:s,{});return i[`${t}methods`]=d,i[`${t}onUpdate`]=[],i[`${t}data`]=e,i[`${t}criticalFields`]={},i[`${t}muppet`]={},i[`${t}listeners`]=Object.keys(m).reduce((s,r)=>!r.startsWith(t)&&r!=="__call"?{...s,[r]:new Map}:s,{}),l&&(i[`${t}getter`]=l.bind(i)),n&&(i.__call=n.bind(i)),i}catch(a){console.error("SOURCE OBJECT ERROR: ",a)}};export{E as a};
