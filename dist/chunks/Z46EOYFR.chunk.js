var d=class extends Function{constructor(){super();let e;return e=(...s)=>e.__call(...s),Object.setPrototypeOf(e,new.target.prototype)}},i="__PROVIDER_ID__",t="__REPO__",y=(n,e)=>(n[`${t}muppet`][i]&&e!==n[`${t}muppet`][i]&&typeof e=="string"&&!e.startsWith(t)&&(n[`${t}muppet`][n[`${t}muppet`][i]]=!1,n[`${t}criticalFields`][n[`${t}muppet`][i]]=[...new Set([...n[`${t}criticalFields`][n[`${t}muppet`][i]]||[],e])]),typeof e=="string"&&e.startsWith(t)||e==="__call"?n[e]:n[`${t}data`][e]),l=(n,e,s)=>typeof e=="string"&&e.startsWith(t)||e==="__call"?(n[e]=s,!0):(n[`${t}data`]={...n[`${t}data`],[e]:s},n[`${t}listeners`][e]&&n[`${t}listeners`][e].size&&n[`${t}listeners`][e].forEach((r,a)=>{n[`${t}muppet`][a]!==void 0&&n[`${t}muppet`][a]===!1&&(n[`${t}muppet`][a]=!0),r()}),n[`${t}onUpdate`].length&&n[`${t}onUpdate`].forEach(r=>r&&r(e)),!0),_=(n,e,s)=>{try{let r=function(){return e?[this,e]:this},a=new d;e&&(a[`${t}methods`]=e),a[`${t}onUpdate`]=[],a[`${t}data`]=n,a[`${t}criticalFields`]={},a[`${t}muppet`]={},a[`${t}listeners`]=Object.keys(n).reduce((u,p)=>({...u,[p]:new Map}),{});let c=new Proxy(a,{set:l,get:y});return a.__call=(s||r).bind(c),c}catch(r){console.error("SOURCE OBJECT ERROR: ",r)}};export{d as a,i as b,t as c,_ as d};
