import {
  FIELDS_PREFIX
} from "./GWKM27VZ.chunk.js";

// packages/watcher/index.ts
var watch = (sourceObj, propertyName) => {
  const index = sourceObj[`${FIELDS_PREFIX}onUpdate`]?.length || 0;
  return new Promise((resolve) => {
    if (sourceObj[`${FIELDS_PREFIX}onUpdate`]) {
      sourceObj[`${FIELDS_PREFIX}onUpdate`] = [
        ...sourceObj[`${FIELDS_PREFIX}onUpdate`],
        (updatedProperty) => {
          if (propertyName === updatedProperty) {
            resolve(sourceObj[propertyName]);
            sourceObj[`${FIELDS_PREFIX}onUpdate`][index] = null;
            if (sourceObj[`${FIELDS_PREFIX}onUpdate`].every((i) => i === null))
              sourceObj[`${FIELDS_PREFIX}onUpdate`] = [];
          }
        }
      ];
    }
  });
};

export {
  watch
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vcGFja2FnZXMvd2F0Y2hlci9pbmRleC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgRklFTERTX1BSRUZJWCB9IGZyb20gXCJjb3JlL2RvbWFpblwiO1xuXG5leHBvcnQgY29uc3Qgd2F0Y2ggPSA8VCA9IGFueT4oc291cmNlT2JqOiBULCBwcm9wZXJ0eU5hbWU6IHN0cmluZyk6IFByb21pc2U8VD4gPT4ge1xuICBjb25zdCBpbmRleCA9IHNvdXJjZU9ialtgJHtGSUVMRFNfUFJFRklYfW9uVXBkYXRlYF0/Lmxlbmd0aCB8fCAwO1xuXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIGlmIChzb3VyY2VPYmpbYCR7RklFTERTX1BSRUZJWH1vblVwZGF0ZWBdKSB7XG4gICAgICBzb3VyY2VPYmpbYCR7RklFTERTX1BSRUZJWH1vblVwZGF0ZWBdID0gW1xuICAgICAgICAuLi5zb3VyY2VPYmpbYCR7RklFTERTX1BSRUZJWH1vblVwZGF0ZWBdLCBcbiAgICAgICAgKHVwZGF0ZWRQcm9wZXJ0eTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgaWYgKHByb3BlcnR5TmFtZSA9PT0gdXBkYXRlZFByb3BlcnR5KSB7XG4gICAgICAgICAgICByZXNvbHZlKHNvdXJjZU9ialtwcm9wZXJ0eU5hbWVdKTtcbiAgICAgICAgICAgIHNvdXJjZU9ialtgJHtGSUVMRFNfUFJFRklYfW9uVXBkYXRlYF1baW5kZXhdID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKHNvdXJjZU9ialtgJHtGSUVMRFNfUFJFRklYfW9uVXBkYXRlYF0uZXZlcnkoKGkpID0+IGkgPT09ICBudWxsKSlcbiAgICAgICAgICAgICAgc291cmNlT2JqW2Ake0ZJRUxEU19QUkVGSVh9b25VcGRhdGVgXSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXTtcbiAgICB9XG4gIH0pO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7QUFFTyxJQUFNLFFBQVEsQ0FBVSxXQUFjLGlCQUFxQztBQUNoRixRQUFNLFFBQVEsVUFBVSxHQUFHLGFBQWEsVUFBVSxHQUFHLFVBQVU7QUFFL0QsU0FBTyxJQUFJLFFBQVEsQ0FBQyxZQUFZO0FBQzlCLFFBQUksVUFBVSxHQUFHLGFBQWEsVUFBVSxHQUFHO0FBQ3pDLGdCQUFVLEdBQUcsYUFBYSxVQUFVLElBQUk7QUFBQSxRQUN0QyxHQUFHLFVBQVUsR0FBRyxhQUFhLFVBQVU7QUFBQSxRQUN2QyxDQUFDLG9CQUE0QjtBQUMzQixjQUFJLGlCQUFpQixpQkFBaUI7QUFDcEMsb0JBQVEsVUFBVSxZQUFZLENBQUM7QUFDL0Isc0JBQVUsR0FBRyxhQUFhLFVBQVUsRUFBRSxLQUFLLElBQUk7QUFFL0MsZ0JBQUksVUFBVSxHQUFHLGFBQWEsVUFBVSxFQUFFLE1BQU0sQ0FBQyxNQUFNLE1BQU8sSUFBSTtBQUNoRSx3QkFBVSxHQUFHLGFBQWEsVUFBVSxJQUFJLENBQUM7QUFBQSxVQUM3QztBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUFBLEVBQ0YsQ0FBQztBQUNIOyIsCiAgIm5hbWVzIjogW10KfQo=
