import{a as f,b as t,c as $}from"./O3VCMV5J.chunk.js";function o(e,n){if(e[`${t}muppet`].get(f)&&n!==e[`${t}muppet`].get(f)&&typeof n=="string"&&!n.startsWith(t)&&!e[`${t}methods`][n]){let s=e[`${t}muppet`].get(f);e[`${t}muppet`].set(s,!1);let l=e[`${t}criticalFields`].get(s)||[];e[`${t}criticalFields`].set(s,[...new Set([...l,n])])}return typeof n=="string"&&n.startsWith(t)||n==="__call"?e[n]:e[`${t}methods`][n]?e[`${t}methods`][n]:e[`${t}getter`]?e[`${t}getter`](n):e[`${t}data`][n]}var g=(e,n,s,l)=>typeof n=="string"&&n.startsWith(t)||n==="__call"?(e[n]=s,!0):(e[`${t}methods`][n]||(e[`${t}data`]={...e[`${t}data`],[n]:s},e[`${t}listeners`][n]&&e[`${t}listeners`][n].size&&e[`${t}listeners`][n].forEach((u,c)=>{e[`${t}muppet`].has(c)&&e[`${t}muppet`].get(c)===!1&&e[`${t}muppet`].set(c,!0),u()}),e[`${t}onUpdate`].length&&e[`${t}onUpdate`].forEach(u=>u&&u(n,s,l))),!0);function h(e){let n=[],s=e;do n.push(...Object.getOwnPropertyNames(s));while(s=Object.getPrototypeOf(s));return n.sort().filter((l,u,c)=>{if(l!=c[u+1]&&typeof e[l]=="function")return!(`${t}data`in e[l])})}var E=(e,{main:n,getter:s})=>{try{let l=(()=>{}),u=new $(l),c=new Set(h(e).filter(i=>i!=="constructor"&&typeof e[i]=="function")),m=Object.keys(e).reduce((i,r)=>(c.has(r)||(r==="name"?Object.defineProperty(i,r,{value:e[r],writable:!0,enumerable:!0,configurable:!0}):i[r]=e[r]),i),u),a=new Proxy(m,{set:g,get:o.bind(void 0)}),d=[...c].reduce((i,r)=>r!=="constructor"&&typeof e[r]=="function"?{...i,[r]:e[r].bind(a)}:i,{});return a[`${t}methods`]=d,a[`${t}onUpdate`]=[],a[`${t}data`]=e,a[`${t}criticalFields`]=new Map,a[`${t}muppet`]=new Map,a[`${t}listeners`]=Object.keys(m).reduce((i,r)=>!r.startsWith(t)&&r!=="__call"?{...i,[r]:new Map}:i,{}),s&&(a[`${t}getter`]=s.bind(a)),n&&(a.__call=n.bind(a)),a}catch{}};export{E as a};
