var d=class extends Function{constructor(){super();let a;return a=(...s)=>a.__call(...s),Object.setPrototypeOf(a,new.target.prototype)}},i="__PROVIDER_ID__",e="__REPO__",y=(t,a)=>(t[`${e}muppet`][i]&&a!==t[`${e}muppet`][i]&&!a.startsWith(e)&&(t[`${e}muppet`][t[`${e}muppet`][i]]=!1,t[`${e}criticalFields`][t[`${e}muppet`][i]]=[...new Set([...t[`${e}criticalFields`][t[`${e}muppet`][i]]||[],a])]),a.startsWith(e)||a==="__call"?t[a]:t[`${e}data`][a]),l=(t,a,s)=>a.startsWith(e)||a==="__call"?(t[a]=s,!0):(t[`${e}data`]={...t[`${e}data`],[a]:s},t[`${e}listeners`][a]&&t[`${e}listeners`][a].size&&t[`${e}listeners`][a].forEach((r,n)=>{t[`${e}muppet`][n]!==void 0&&t[`${e}muppet`][n]===!1&&(t[`${e}muppet`][n]=!0),r()}),t[`${e}onUpdate`].length&&t[`${e}onUpdate`].forEach(r=>r&&r(a)),!0),f=(t,a,s)=>{try{let r=function(){return a?[this,a]:this},n=new d;a&&(n[`${e}methods`]=a),n[`${e}onUpdate`]=[],n[`${e}data`]=t,n[`${e}criticalFields`]={},n[`${e}muppet`]={},n[`${e}listeners`]=Object.keys(t).reduce((p,u)=>({...p,[u]:new Map}),{});let c=new Proxy(n,{set:l,get:y});return n.__call=(s||r).bind(c),c}catch(r){console.error("SOURCE OBJECT ERROR: ",r)}};export{d as a,i as b,e as c,f as d};
