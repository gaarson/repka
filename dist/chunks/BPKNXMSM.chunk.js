import{a as c,b as t,c as $}from"./KFMMTQSC.chunk.js";var o=(e,n)=>(e[`${t}muppet`][c]&&n!==e[`${t}muppet`][c]&&typeof n=="string"&&!n.startsWith(t)&&!e[`${t}methods`][n]&&(e[`${t}muppet`][e[`${t}muppet`][c]]=!1,e[`${t}criticalFields`][e[`${t}muppet`][c]]=[...new Set([...e[`${t}criticalFields`][e[`${t}muppet`][c]]||[],n])]),typeof n=="string"&&n.startsWith(t)||n==="__call"?e[n]:e[`${t}methods`][n]?e[`${t}methods`][n]:e[`${t}getter`]?e[`${t}getter`](n):e[`${t}data`][n]),h=(e,n,l)=>typeof n=="string"&&n.startsWith(t)||n==="__call"?(e[n]=l,!0):(e[`${t}methods`][n]||(e[`${t}data`]={...e[`${t}data`],[n]:l},e[`${t}listeners`][n]&&e[`${t}listeners`][n].size&&e[`${t}listeners`][n].forEach((a,u)=>{e[`${t}muppet`][u]!==void 0&&e[`${t}muppet`][u]===!1&&(e[`${t}muppet`][u]=!0),a()}),e[`${t}onUpdate`].length&&e[`${t}onUpdate`].forEach(a=>a&&a(n))),!0);function y(e){let n=[],l=e;do n.push(...Object.getOwnPropertyNames(l));while(l=Object.getPrototypeOf(l));return n.sort().filter((a,u,f)=>{if(a!=f[u+1]&&typeof e[a]=="function")return!0})}var E=(e,{main:n,getter:l})=>{try{let a=(()=>{}),u=new $(a),f=new Set(y(e).filter(s=>s!=="constructor"&&typeof e[s]=="function")),m=Object.keys(e).reduce((s,i)=>(f.has(i)||(s[i]=e[i]),s),u),r=new Proxy(m,{set:h,get:o}),d=[...f].reduce((s,i)=>i!=="constructor"&&typeof e[i]=="function"?{...s,[i]:e[i].bind(r)}:s,{});return r[`${t}methods`]=d,r[`${t}onUpdate`]=[],r[`${t}data`]=e,r[`${t}criticalFields`]={},r[`${t}muppet`]={},r[`${t}listeners`]=Object.keys(m).reduce((s,i)=>!i.startsWith(t)&&i!=="__call"?{...s,[i]:new Map}:s,{}),l&&(r[`${t}getter`]=l.bind(r)),n&&(r.__call=n.bind(r)),r}catch{}};export{E as a};
