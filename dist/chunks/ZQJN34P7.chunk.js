import {
  FIELDS_PREFIX
} from "./GWKM27VZ.chunk.js";

// packages/watcher/index.ts
var watch = (sourceObj, propertyName) => {
  const index = sourceObj[`${FIELDS_PREFIX}onUpdate`]?.length || 0;
  return new Promise((resolve) => {
    if (sourceObj[`${FIELDS_PREFIX}onUpdate`]) {
      sourceObj[`${FIELDS_PREFIX}onUpdate`] = [
        ...sourceObj[`${FIELDS_PREFIX}onUpdate`],
        (updatedProperty, value) => {
          if (propertyName === updatedProperty) {
            resolve(value);
            sourceObj[`${FIELDS_PREFIX}onUpdate`][index] = null;
            if (sourceObj[`${FIELDS_PREFIX}onUpdate`].every((i) => i === null))
              sourceObj[`${FIELDS_PREFIX}onUpdate`] = [];
          }
        }
      ];
    }
  });
};

export {
  watch
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vcGFja2FnZXMvd2F0Y2hlci9pbmRleC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgRklFTERTX1BSRUZJWCB9IGZyb20gXCJjb3JlL2RvbWFpblwiO1xuXG5leHBvcnQgY29uc3Qgd2F0Y2ggPSA8VCA9IGFueT4oc291cmNlT2JqOiBULCBwcm9wZXJ0eU5hbWU6IHN0cmluZyk6IFByb21pc2U8VD4gPT4ge1xuICBjb25zdCBpbmRleCA9IHNvdXJjZU9ialtgJHtGSUVMRFNfUFJFRklYfW9uVXBkYXRlYF0/Lmxlbmd0aCB8fCAwO1xuXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIGlmIChzb3VyY2VPYmpbYCR7RklFTERTX1BSRUZJWH1vblVwZGF0ZWBdKSB7XG4gICAgICBzb3VyY2VPYmpbYCR7RklFTERTX1BSRUZJWH1vblVwZGF0ZWBdID0gW1xuICAgICAgICAuLi5zb3VyY2VPYmpbYCR7RklFTERTX1BSRUZJWH1vblVwZGF0ZWBdLCBcbiAgICAgICAgKHVwZGF0ZWRQcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bikgPT4ge1xuICAgICAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09IHVwZGF0ZWRQcm9wZXJ0eSkge1xuICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSBhcyBUKTsgXG4gICAgICAgICAgICBzb3VyY2VPYmpbYCR7RklFTERTX1BSRUZJWH1vblVwZGF0ZWBdW2luZGV4XSA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmIChzb3VyY2VPYmpbYCR7RklFTERTX1BSRUZJWH1vblVwZGF0ZWBdLmV2ZXJ5KChpKSA9PiBpID09PSAgbnVsbCkpXG4gICAgICAgICAgICAgIHNvdXJjZU9ialtgJHtGSUVMRFNfUFJFRklYfW9uVXBkYXRlYF0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF07XG4gICAgfVxuICB9KTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7O0FBRU8sSUFBTSxRQUFRLENBQVUsV0FBYyxpQkFBcUM7QUFDaEYsUUFBTSxRQUFRLFVBQVUsR0FBRyxhQUFhLFVBQVUsR0FBRyxVQUFVO0FBRS9ELFNBQU8sSUFBSSxRQUFRLENBQUMsWUFBWTtBQUM5QixRQUFJLFVBQVUsR0FBRyxhQUFhLFVBQVUsR0FBRztBQUN6QyxnQkFBVSxHQUFHLGFBQWEsVUFBVSxJQUFJO0FBQUEsUUFDdEMsR0FBRyxVQUFVLEdBQUcsYUFBYSxVQUFVO0FBQUEsUUFDdkMsQ0FBQyxpQkFBeUIsVUFBbUI7QUFDM0MsY0FBSSxpQkFBaUIsaUJBQWlCO0FBQ3BDLG9CQUFRLEtBQVU7QUFDbEIsc0JBQVUsR0FBRyxhQUFhLFVBQVUsRUFBRSxLQUFLLElBQUk7QUFFL0MsZ0JBQUksVUFBVSxHQUFHLGFBQWEsVUFBVSxFQUFFLE1BQU0sQ0FBQyxNQUFNLE1BQU8sSUFBSTtBQUNoRSx3QkFBVSxHQUFHLGFBQWEsVUFBVSxJQUFJLENBQUM7QUFBQSxVQUM3QztBQUFBLFFBQ0Y7QUFBQSxNQUNGO0FBQUEsSUFDRjtBQUFBLEVBQ0YsQ0FBQztBQUNIOyIsCiAgIm5hbWVzIjogW10KfQo=
