{
  "version": 3,
  "sources": ["../../packages/react-provider/stringHash.ts", "../../packages/react-provider/getComponentName.ts", "../../packages/react-provider/spamHash.ts", "../../packages/react-provider/index.ts"],
  "sourcesContent": ["export function simpleHash(str: string): string {\n  let hash = 5381; // \u0421\u0442\u0430\u0440\u0442\u043E\u0432\u043E\u0435 \"\u043C\u0430\u0433\u0438\u0447\u0435\u0441\u043A\u043E\u0435\" \u0447\u0438\u0441\u043B\u043E\n  for (let i = 0; i < str.length; i++) {\n    hash = ((hash << 5) + hash) + str.charCodeAt(i); /* hash * 33 + c */\n  }\n  return String(hash);\n}\n", "import React from 'react';\n\n/**\n * \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442 React Internals \u0434\u043B\u044F \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0438\u043C\u0435\u043D\u0438 \u043A\u043E\u043C\u043F\u043E\u043D\u0435\u043D\u0442\u0430,\n * \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u0441\u0435\u0439\u0447\u0430\u0441 \u0440\u0435\u043D\u0434\u0435\u0440\u0438\u0442\u0441\u044F.\n * \u042D\u0442\u043E \"\u0447\u0435\u0440\u043D\u0430\u044F \u043C\u0430\u0442\u0435\u0440\u0438\u044F\" \u2013 \u0445\u0440\u0443\u043F\u043A\u043E, \u043D\u043E \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0434\u043B\u044F \u043E\u0431\u043E\u0433\u0430\u0449\u0435\u043D\u0438\u044F \u043E\u0448\u0438\u0431\u043E\u043A.\n */\nexport function getRenderingComponentName(): string {\n  const fallback = 'UnknownComponent';\n  try {\n    // @ts-ignore\n    const internals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n    if (!internals) return fallback;\n    const owner = internals.ReactCurrentOwner?.current;\n    if (!owner) return fallback;\n    const componentType = owner.type;\n    if (!componentType) return fallback;\n\n    // .name \u0434\u043B\u044F function-\u043A\u043E\u043C\u043F\u043E\u043D\u0435\u043D\u0442\u043E\u0432, .displayName \u0434\u043B\u044F React.memo \u0438 \u0442.\u0434.\n    return componentType.displayName || componentType.name || fallback;\n  } catch (e) {\n    // \u0412 \u0441\u043B\u0443\u0447\u0430\u0435 \u043B\u044E\u0431\u043E\u0439 \u043E\u0448\u0438\u0431\u043A\u0438 (\u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, \u0432 \u043D\u043E\u0432\u043E\u0439 \u0432\u0435\u0440\u0441\u0438\u0438 React)\n    // \u043C\u044B \u043F\u0440\u043E\u0441\u0442\u043E \u0432\u0435\u0440\u043D\u0435\u043C fallback, \u0430 \u043D\u0435 \u0443\u043F\u0430\u0434\u0435\u043C.\n    return fallback;\n  }\n}\n", "import React from 'react';\nimport { simpleHash } from './stringHash';\n\nexport let KNOWN_SPAM_HASH: string | null = null;\n\n// \u041A\u043E\u043C\u043F\u043E\u043D\u0435\u043D\u0442, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 *\u0433\u0430\u0440\u0430\u043D\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u043E* \u043F\u0430\u0434\u0430\u0435\u0442 \u0432 useEffect\n// \u042D\u0442\u043E \u041D\u0415 \u043F\u0430\u0434\u0430\u0435\u0442 \u0432\u043E \u0432\u0440\u0435\u043C\u044F SSR (renderToString)\nconst BrokenComponent = () => {\n  React.useEffect(() => {\n    React.useState()\n  }, [])\n  return null;\n};\n\nconst cleanErrorMessage = (message: string | Event): string => {\n  let str = message.toString();\n  str = str.replace(/^(Uncaught )?Error: /, '');\n  return str;\n}\n\n(async () => {\n  const isServer = typeof window === 'undefined';\n\n  try {\n    if (isServer) {\n      // --- \u041B\u041E\u0413\u0418\u041A\u0410 \u0414\u041B\u042F \u0421\u0415\u0420\u0412\u0415\u0420\u0410 ---\n      // \u0412\u041D\u0418\u041C\u0410\u041D\u0418\u0415: \u041A\u0430\u043A \u043C\u044B \u043E\u0431\u0441\u0443\u0436\u0434\u0430\u043B\u0438, \u044D\u0442\u043E\u0442 \u0431\u043B\u043E\u043A \u043D\u0435 \u043F\u043E\u0439\u043C\u0430\u0435\u0442 \u043E\u0448\u0438\u0431\u043A\u0443,\n      // \u0442\u0430\u043A \u043A\u0430\u043A renderToString \u043D\u0435 \u0432\u044B\u043F\u043E\u043B\u043D\u044F\u0435\u0442 useEffect.\n      // \u041E\u0441\u0442\u0430\u0432\u043B\u044F\u044E \u0435\u0433\u043E \u043A\u0430\u043A \u0432 \u043E\u0440\u0438\u0433\u0438\u043D\u0430\u043B\u0435, \u0442.\u043A. \u043D\u0430\u0448\u0430 \u0446\u0435\u043B\u044C - \u043F\u043E\u0447\u0438\u043D\u0438\u0442\u044C \u041A\u041B\u0418\u0415\u041D\u0422.\n      const { renderToString } = await import('react-dom/server');\n      \n      const originalConsoleError = console.error;\n      console.error = () => {};\n\n      try {\n        renderToString(React.createElement(BrokenComponent));\n      } catch (error: any) {\n        // \u042D\u0442\u043E\u0442 catch (\u0441\u043A\u043E\u0440\u0435\u0435 \u0432\u0441\u0435\u0433\u043E) \u043D\u0438\u043A\u043E\u0433\u0434\u0430 \u043D\u0435 \u0432\u044B\u043F\u043E\u043B\u043D\u0438\u0442\u0441\u044F\n        const cleanMessage = cleanErrorMessage(error.message);\n        KNOWN_SPAM_HASH = simpleHash(cleanMessage.substring(0, 200));\n      } finally {\n        console.error = originalConsoleError;\n      }\n\n    } else {\n      // --- \u041B\u041E\u0413\u0418\u041A\u0410 \u0414\u041B\u042F \u041A\u041B\u0418\u0415\u041D\u0422\u0410 (\u0418\u0421\u041F\u0420\u0410\u0412\u041B\u0415\u041D\u0410) ---\n      const runClientCheck = async () => {\n        try {\n          const { createRoot } = await import('react-dom/client');\n\n          const tempDiv = document.createElement('div');\n          tempDiv.id = 'react-error-test-rig';\n          tempDiv.style.display = 'none';\n          document.body.appendChild(tempDiv);\n          const root = createRoot(tempDiv);\n\n          // \u0421\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u043C \u043E\u0440\u0438\u0433\u0438\u043D\u0430\u043B\u044C\u043D\u044B\u0435 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438\n          const originalConsoleError = console.error;\n          const originalOnError = window.onerror;\n          const originalOnUnhandledRejection = window.onunhandledrejection;\n\n          // \u0424\u043B\u0430\u0433-\u043B\u043E\u0432\u0443\u0448\u043A\u0430. \u0413\u043B\u043E\u0431\u0430\u043B\u044C\u043D\u044B\u0439, \u0447\u0442\u043E\u0431\u044B \u0431\u044B\u0442\u044C \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u043C \u0432\u043E \u0432\u0441\u0435\u0445 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0430\u0445.\n          (window as any).__IS_REACT_SPAM_TEST__ = false;\n\n          const cleanup = () => {\n            setTimeout(() => {\n              // 1. \u0412\u044B\u043A\u043B\u044E\u0447\u0430\u0435\u043C \u043B\u043E\u0432\u0443\u0448\u043A\u0443 \u043F\u0440\u0438 \u043E\u0447\u0438\u0441\u0442\u043A\u0435\n              (window as any).__IS_REACT_SPAM_TEST__ = false;\n\n              // 2. \u0421\u043D\u0438\u043C\u0430\u0435\u043C \u043D\u0430\u0448\u0438 'capture' \u0441\u043B\u0443\u0448\u0430\u0442\u0435\u043B\u0438\n              window.removeEventListener('error', errorListener, { capture: true });\n              window.removeEventListener('unhandledrejection', rejectionListener, { capture: true });\n\n              // 3. \u0412\u043E\u0441\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u043C \u043E\u0440\u0438\u0433\u0438\u043D\u0430\u043B\u044C\u043D\u044B\u0435 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438\n              console.error = originalConsoleError;\n              window.onerror = originalOnError;\n              window.onunhandledrejection = originalOnUnhandledRejection;\n              \n              // 4. \u041E\u0447\u0438\u0449\u0430\u0435\u043C DOM\n              try {\n                root.unmount();\n                tempDiv.remove();\n              } catch (e) {}\n            }, 0);\n          };\n\n          //\n          // \u041D\u0410\u0428 \u041E\u0421\u041D\u041E\u0412\u041D\u041E\u0419 \u041E\u0411\u0420\u0410\u0411\u041E\u0422\u0427\u0418\u041A \u041E\u0428\u0418\u0411\u041E\u041A (\u0424\u0410\u0417\u0410 CAPTURE)\n          // \u041E\u043D \u0441\u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442 *\u043F\u0435\u0440\u0432\u044B\u043C*, \u0434\u043E \u0442\u043E\u0433\u043E \u043A\u0430\u043A \u043E\u0448\u0438\u0431\u043A\u0430 \u0434\u043E\u0439\u0434\u0435\u0442 \u0434\u043E window.onerror\n          //\n          const errorListener = (event: ErrorEvent) => {\n            // 1. \u041F\u0420\u041E\u0412\u0415\u0420\u041A\u0410 \u0424\u041B\u0410\u0413\u0410\n            // \u041C\u044B \u0432\u043E\u043E\u0431\u0449\u0435 \u0436\u0434\u0435\u043C \u043E\u0448\u0438\u0431\u043A\u0443? \u0415\u0441\u043B\u0438 \u0444\u043B\u0430\u0433 false, \u044D\u0442\u043E \u0447\u0443\u0436\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430 (\u043D\u0430\u043F\u0440. \u043E\u0442 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u0438\u044F)\n            // \u0418\u0433\u043D\u043E\u0440\u0438\u0440\u0443\u0435\u043C \u0435\u0435.\n            if (!(window as any).__IS_REACT_SPAM_TEST__) {\n              return;\n            }\n\n            // 2. \u041F\u0420\u041E\u0412\u0415\u0420\u041A\u0410 \u0421\u041E\u0414\u0415\u0420\u0416\u0410\u041D\u0418\u042F\n            // \u041E\u043A\u0435\u0439, \u043C\u044B \u0436\u0434\u0435\u043C \u043E\u0448\u0438\u0431\u043A\u0443. \u0410 \u044D\u0442\u043E *\u0442\u0430 \u0441\u0430\u043C\u0430\u044F* \u043E\u0448\u0438\u0431\u043A\u0430?\n            const cleanMessage = cleanErrorMessage(event.message);\n            const isTheSpamError =\n              cleanMessage.includes('Invalid hook call') || // \u0434\u043B\u044F dev\n              cleanMessage.includes('Minified React error #321'); // \u0434\u043B\u044F prod\n\n            if (isTheSpamError) {\n              // \u0411\u0418\u041D\u0413\u041E! \u041C\u044B \u043F\u043E\u0439\u043C\u0430\u043B\u0438 \u043D\u0430\u0448\u0435\u0433\u043E \u0437\u0432\u0435\u0440\u044F.\n              const hash = simpleHash(cleanMessage.substring(0, 200));\n              KNOWN_SPAM_HASH = hash;\n\n              // \u041F\u043E\u043B\u043D\u043E\u0441\u0442\u044C\u044E \u0433\u043B\u0443\u0448\u0438\u043C \u044D\u0442\u0443 \u043E\u0448\u0438\u0431\u043A\u0443, \u0447\u0442\u043E\u0431\u044B \u043E\u043D\u0430 \u043D\u0435 \u043F\u043E\u0448\u043B\u0430 \u0434\u0430\u043B\u044C\u0448\u0435\n              event.preventDefault();\n              event.stopImmediatePropagation();\n              event.stopPropagation();\n              \n              // \u041F\u0440\u0438\u0431\u0438\u0440\u0430\u0435\u043C\u0441\u044F \u0437\u0430 \u0441\u043E\u0431\u043E\u0439\n              cleanup();\n              return false;\n            }\n\n            // \u0415\u0441\u043B\u0438 \u0444\u043B\u0430\u0433 true, \u043D\u043E \u043E\u0448\u0438\u0431\u043A\u0430 *\u043D\u0435 \u0442\u0430* - \u043C\u044B \u043F\u0440\u043E\u0441\u0442\u043E \u043D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u0434\u0435\u043B\u0430\u0435\u043C.\n            // \u041C\u044B \u0436\u0434\u0435\u043C *\u043D\u0430\u0448\u0443* \u043E\u0448\u0438\u0431\u043A\u0443, \u0430 \u044D\u0442\u0443 (\u0441\u043B\u0443\u0447\u0430\u0439\u043D\u0443\u044E) \u043F\u0440\u043E\u0441\u0442\u043E \u0438\u0433\u043D\u043E\u0440\u0438\u0440\u0443\u0435\u043C,\n            // \u043D\u043E \u043B\u043E\u0432\u0443\u0448\u043A\u0443 \u043D\u0435 \u0443\u0431\u0438\u0440\u0430\u0435\u043C.\n          };\n\n          //\n          // \u041D\u0410\u0428 \u041E\u0421\u041D\u041E\u0412\u041D\u041E\u0419 \u041E\u0411\u0420\u0410\u0411\u041E\u0422\u0427\u0418\u041A PROMISE REJECTION (\u0424\u0410\u0417\u0410 CAPTURE)\n          // (React \u0438\u043D\u043E\u0433\u0434\u0430 \u0431\u0440\u043E\u0441\u0430\u0435\u0442 \u043E\u0448\u0438\u0431\u043A\u0438 \u043A\u0430\u043A promise rejection)\n          //\n          const rejectionListener = (event: PromiseRejectionEvent) => {\n            // 1. \u041F\u0420\u041E\u0412\u0415\u0420\u041A\u0410 \u0424\u041B\u0410\u0413\u0410\n            if (!(window as any).__IS_REACT_SPAM_TEST__) {\n              return;\n            }\n\n            const reason = event.reason?.message || event.reason?.toString() || '';\n            const cleanMessage = cleanErrorMessage(reason);\n\n            // 2. \u041F\u0420\u041E\u0412\u0415\u0420\u041A\u0410 \u0421\u041E\u0414\u0415\u0420\u0416\u0410\u041D\u0418\u042F\n            const isTheSpamError =\n              cleanMessage.includes('Invalid hook call') || // dev\n              cleanMessage.includes('Minified React error #321'); // prod\n\n            if (isTheSpamError) {\n              // \u0411\u0418\u041D\u0413\u041E!\n              const hash = simpleHash(cleanMessage.substring(0, 200));\n              KNOWN_SPAM_HASH = hash;\n\n              event.preventDefault();\n              event.stopImmediatePropagation();\n              event.stopPropagation();\n              \n              cleanup();\n            }\n          };\n\n          // \u0412\u0435\u0448\u0430\u0435\u043C \u043D\u0430\u0448\u0438 \u043C\u043E\u0449\u043D\u044B\u0435 'capture' \u0441\u043B\u0443\u0448\u0430\u0442\u0435\u043B\u0438. \u041E\u043D\u0438 \u0441\u0440\u0430\u0431\u043E\u0442\u0430\u044E\u0442 \u043F\u0435\u0440\u0432\u044B\u043C\u0438.\n          window.addEventListener('error', errorListener, { capture: true });\n          window.addEventListener('unhandledrejection', rejectionListener, { capture: true });\n\n          // \u0413\u043B\u0443\u0448\u0438\u043C console.error, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 React \u043B\u044E\u0431\u0438\u0442 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C\n          console.error = () => {};\n\n          // \u042D\u0442\u0438 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438 \u043D\u0443\u0436\u043D\u044B, \u0447\u0442\u043E\u0431\u044B *\u043E\u043A\u043E\u043D\u0447\u0430\u0442\u0435\u043B\u044C\u043D\u043E*\n          // \u043F\u043E\u0434\u0430\u0432\u0438\u0442\u044C \u0432\u044B\u0432\u043E\u0434 \u043E\u0448\u0438\u0431\u043A\u0438 \u0432 \u043A\u043E\u043D\u0441\u043E\u043B\u044C (return true).\n          // \u041D\u0430\u0448\u0430 \u043B\u043E\u0433\u0438\u043A\u0430 \u0443\u0436\u0435 \u043E\u0442\u0440\u0430\u0431\u043E\u0442\u0430\u043B\u0430 \u0432 'capture' \u0441\u043B\u0443\u0448\u0430\u0442\u0435\u043B\u044F\u0445.\n          window.onerror = function (message){\n            if ((window as any).__IS_REACT_SPAM_TEST__) {\n              return true; // \u041F\u043E\u0434\u0430\u0432\u0438\u0442\u044C \u043E\u0448\u0438\u0431\u043A\u0443\n            }\n            return originalOnError ? originalOnError.apply(window, arguments as any) : false;\n          };\n          \n          window.onunhandledrejection = (event) => {\n             if ((window as any).__IS_REACT_SPAM_TEST__) {\n              return true; // \u041F\u043E\u0434\u0430\u0432\u0438\u0442\u044C \u043E\u0448\u0438\u0431\u043A\u0443\n            }\n            return originalOnUnhandledRejection ? originalOnUnhandledRejection.apply(window, [event]) : false;\n          };\n\n          // --- \u0413\u041B\u0410\u0412\u041D\u042B\u0419 \u041C\u041E\u041C\u0415\u041D\u0422 ---\n          \n          // 1. \u0412\u0417\u0412\u041E\u0414\u0418\u041C \u041B\u041E\u0412\u0423\u0428\u041A\u0423\n          (window as any).__IS_REACT_SPAM_TEST__ = true;\n\n          // 2. \u0417\u0410\u041F\u0423\u0421\u041A\u0410\u0415\u041C \u041A\u041E\u041C\u041F\u041E\u041D\u0415\u041D\u0422, \u041A\u041E\u0422\u041E\u0420\u042B\u0419 \u0412\u042B\u0417\u041E\u0412\u0415\u0422 \u041E\u0428\u0418\u0411\u041A\u0423\n          // \u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u043E\u0438\u0437\u043E\u0439\u0434\u0435\u0442 \u0430\u0441\u0438\u043D\u0445\u0440\u043E\u043D\u043D\u043E, \u0432\u043D\u0443\u0442\u0440\u0438 useEffect\n          root.render(React.createElement(BrokenComponent));\n\n          // \u041D\u0430\u0448\u0430 \u043B\u043E\u0432\u0443\u0448\u043A\u0430 (\u0444\u043B\u0430\u0433) \u043E\u0441\u0442\u0430\u043D\u0435\u0442\u0441\u044F \u0432\u0437\u0432\u0435\u0434\u0435\u043D\u043D\u043E\u0439 \u0434\u043E \u0442\u0435\u0445 \u043F\u043E\u0440,\n          // \u043F\u043E\u043A\u0430 'errorListener' \u043D\u0435 \u043F\u043E\u0439\u043C\u0430\u0435\u0442 *\u043D\u0443\u0436\u043D\u0443\u044E* \u043E\u0448\u0438\u0431\u043A\u0443 \u0438 \u043D\u0435 \u0432\u044B\u0437\u043E\u0432\u0435\u0442 cleanup().\n\n        } catch (e: any) {\n          // \u0412\u043E\u0441\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u043C \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438, \u0435\u0441\u043B\u0438 *\u0441\u0430\u043C \u043D\u0430\u0448 \u0441\u043A\u0440\u0438\u043F\u0442* \u0443\u043F\u0430\u043B\n          if ((window as any).originalConsoleError) {\n            console.error = (window as any).originalConsoleError;\n          }\n          if ((window as any).originalOnError) {\n            window.onerror = (window as any).originalOnError;\n          }\n          if ((window as any).originalOnUnhandledRejection) {\n            window.onunhandledrejection = (window as any).originalOnUnhandledRejection;\n          }\n          console.error(`[SPAM HASH SCRIPT] \u041A\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043A\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430 (\u0432\u043D\u0443\u0442\u0440\u0438 runClientCheck):`, e);\n        }\n      };\n      \n      // \u0417\u0430\u043F\u0443\u0441\u043A\u0430\u0435\u043C \u0430\u0441\u0438\u043D\u0445\u0440\u043E\u043D\u043D\u043E, \u0447\u0442\u043E\u0431\u044B \u043D\u0435 \u043A\u043E\u043D\u0444\u043B\u0438\u043A\u0442\u043E\u0432\u0430\u0442\u044C \u0441 \u0433\u0438\u0434\u0440\u0430\u0442\u0430\u0446\u0438\u0435\u0439 Next.js\n      setTimeout(runClientCheck, 0);\n    }\n  } catch (e: any) {\n    console.error(`[SPAM HASH SCRIPT] \u041A\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043A\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430 (\u0432\u043D\u0435\u0448\u043D\u0438\u0439 IIFE):`, e);\n  }\n})();\n", "import React from 'react';\nimport { FIELDS_PREFIX } from 'core/domain';\nimport { REACTION_STACK } from 'reaction';\n\nimport { simpleHash } from './stringHash';\nimport { getRenderingComponentName } from './getComponentName';\nimport { KNOWN_SPAM_HASH } from './spamHash';\n\nexport function createRepkaError(\n  originalError: unknown,\n  componentName: string,\n  spamHash: string | null,\n  errorHash: string\n): Error {\n  const isError = originalError instanceof Error;\n  const message = isError ? originalError.message : String(originalError);\n\n  const repkaError = new Error(\n    `[Repka CRITICAL ERROR in <${componentName}>] \\n\\n` +\n    `Repka's magic getter (store.prop) caught an UNKNOWN React error. \\n` +\n    `This is NOT the expected 'Invalid hook call' spam. \\n` +\n    `(Known Spam Hash: ${spamHash}, This Error Hash: ${errorHash}) \\n\\n` +\n    `This is likely a CRITICAL React error (e.g., 'Rendered more hooks...'). \\n` +\n    `Repka is crashing LOUDLY to prevent a \"zombie component\". \\n\\n` +\n    `Original error: \\n` +\n    `> ${message}`\n  );\n\n  // @ts-ignore\n  repkaError.cause = originalError;\n  return repkaError;\n}\n\nexport const simpleHook = <T extends object>(context: T, prop: keyof T): T[keyof T] => {\n  const useSync = React.useSyncExternalStore;\n  if (!useSync) {\n    return context[`${FIELDS_PREFIX}data`][prop];\n  }\n\n  const state = useSync(\n    (notify) => {\n      try {\n        const currentProp = prop;\n\n        if (\n          context[`${FIELDS_PREFIX}listeners`][currentProp] &&\n          typeof context[`${FIELDS_PREFIX}listeners`][currentProp].set === 'function'\n        ) {\n          context[`${FIELDS_PREFIX}listeners`][currentProp].set(notify, notify);\n        }\n\n        if (\n          context[`${FIELDS_PREFIX}criticalFields`] &&\n          typeof context[`${FIELDS_PREFIX}criticalFields`].set === 'function'\n        ) {\n          context[`${FIELDS_PREFIX}criticalFields`].set(notify, [currentProp]);\n        }\n        \n        if (\n          context[`${FIELDS_PREFIX}muppet`] &&\n          typeof context[`${FIELDS_PREFIX}muppet`].set === 'function'\n        ) {\n          context[`${FIELDS_PREFIX}muppet`].set(notify, true);\n        }\n      } catch (err) {\n        console.error(\"Error during subscribe:\", err, prop);\n      }\n\n      return () => {\n        try {\n          context[`${FIELDS_PREFIX}muppet`]?.set(notify, false);\n\n          const fields = context[`${FIELDS_PREFIX}criticalFields`]?.get(notify);\n          if (fields) {\n            fields.forEach(p => {\n              context[`${FIELDS_PREFIX}listeners`][p]?.delete(notify);\n            });\n          }\n\n          context[`${FIELDS_PREFIX}criticalFields`]?.delete(notify);\n          context[`${FIELDS_PREFIX}muppet`]?.delete(notify);\n        } catch (err) {\n          console.error(\"Error during unsubscribe:\", err);\n        }\n      };\n    },\n    () => {\n      try {\n        return context[`${FIELDS_PREFIX}data`];\n      } catch(error) {\n        return {} as T;\n      }\n    },\n    () => {\n      try {\n        return context[`${FIELDS_PREFIX}data`];\n      } catch (error) {\n        return {} as T;\n      }\n    }\n  );\n\n  // @ts-ignore\n  return state ? state[prop] : context[`${FIELDS_PREFIX}data`][prop];\n}\n\nexport function simpleReactProvider<T extends object>(this: T, prop: keyof T): T[keyof T] {\n  const currentReaction = REACTION_STACK[REACTION_STACK.length - 1];\n  if (currentReaction) {\n    currentReaction.reportDependency(this, prop as string);\n    return this[`${FIELDS_PREFIX}data`][prop];\n  }\n\n  let isInReactRender = false;\n  if (React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE) {\n    if (React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE?.H !== null) {\n      isInReactRender = true;\n    }\n  } else if (React?.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED?.ReactCurrentDispatcher?.current) {\n    isInReactRender = true;\n  }\n\n  if (!isInReactRender) {\n    return this[`${FIELDS_PREFIX}data`][prop];\n  }\n\n  try {\n    return simpleHook<T>(this, prop);\n  } catch (e) {\n    if (!(e instanceof Error)) {\n      throw e;\n    }\n\n    const messageToHash = e.message.substring(0, 200);\n    const messageHash = simpleHash(messageToHash);\n\n    console.log(messageHash, KNOWN_SPAM_HASH, e.message)\n    if (KNOWN_SPAM_HASH && messageHash === KNOWN_SPAM_HASH) {\n      return this[`${FIELDS_PREFIX}data`][prop];\n    }\n    \n    const componentName = getRenderingComponentName();\n    throw createRepkaError(e, componentName, KNOWN_SPAM_HASH, messageHash);\n  }\n}\n"],
  "mappings": "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",
  "names": ["React", "React"]
}
