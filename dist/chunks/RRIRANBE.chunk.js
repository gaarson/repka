var i="__PROVIDER_ID__",e="__REPO__",p=(t,n)=>(t[`${e}muppet`][i]&&n!==t[`${e}muppet`][i]&&!n.startsWith(e)&&(t[`${e}muppet`][t[`${e}muppet`][i]]=!1,t[`${e}criticalFields`][t[`${e}muppet`][i]]=[...new Set([...t[`${e}criticalFields`][t[`${e}muppet`][i]]||[],n])]),n.startsWith(e)||n==="__call"?t[n]:t[`${e}data`][n]),$=(t,n,s)=>(n.startsWith(e)||n==="__call"||(t[`${e}listeners`][n]&&t[`${e}listeners`][n].size&&t[`${e}listeners`][n].forEach((a,r)=>{t[`${e}muppet`][r]!==void 0&&t[`${e}muppet`][r]===!1&&(t[`${e}muppet`][r]=!0),a()}),t[`${e}data`]={...t[`${e}data`],[n]:s}),!0),c=class extends Function{constructor(){super();let n;return n=(...s)=>n.__call(...s),Object.setPrototypeOf(n,new.target.prototype)}},O=(t,n,s)=>{try{let a=function(){return s?[this,s]:this},r=new c;r[`${e}onUpdate`]=[],r[`${e}data`]=t,r[`${e}criticalFields`]={},r[`${e}muppet`]={},r[`${e}listeners`]=Object.keys(t).reduce((d,l)=>({...d,[l]:new Map}),{}),s&&(r[`${e}methods`]=s);let u=new Proxy(r,{set:$,get:p});return r.__call=(n||a).bind(u),u}catch(a){console.error("SOURCE OBJECT ERROR: ",a)}};export{i as a,e as b,O as c};
