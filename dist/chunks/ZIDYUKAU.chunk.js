import{a as c,b as t,c as $}from"./KFMMTQSC.chunk.js";var o=(e,n)=>(e[`${t}muppet`][c]&&n!==e[`${t}muppet`][c]&&typeof n=="string"&&!n.startsWith(t)&&!e[`${t}methods`][n]&&(e[`${t}muppet`][e[`${t}muppet`][c]]=!1,e[`${t}criticalFields`][e[`${t}muppet`][c]]=[...new Set([...e[`${t}criticalFields`][e[`${t}muppet`][c]]||[],n])]),typeof n=="string"&&n.startsWith(t)||n==="__call"?e[n]:e[`${t}methods`][n]?e[`${t}methods`][n]:e[`${t}getter`]?e[`${t}getter`](n):e[`${t}data`][n]),h=(e,n,l)=>typeof n=="string"&&n.startsWith(t)||n==="__call"?(e[n]=l,!0):(e[`${t}methods`][n]||(e[`${t}data`]={...e[`${t}data`],[n]:l},e[`${t}listeners`][n]&&e[`${t}listeners`][n].size&&e[`${t}listeners`][n].forEach((a,u)=>{e[`${t}muppet`][u]!==void 0&&e[`${t}muppet`][u]===!1&&(e[`${t}muppet`][u]=!0),a()}),e[`${t}onUpdate`].length&&e[`${t}onUpdate`].forEach(a=>a&&a(n))),!0);function y(e){let n=[],l=e;do n.push(...Object.getOwnPropertyNames(l));while(l=Object.getPrototypeOf(l));return n.sort().filter((a,u,f)=>{if(a!=f[u+1]&&typeof e[a]=="function")return!0})}var E=(e,{main:n,getter:l})=>{try{let a=()=>{},u=new $(a),f=new Set(y(e).filter(r=>r!=="constructor"&&typeof e[r]=="function")),m=Object.keys(e).reduce((r,i)=>(f.has(i)||(r[i]=e[i]),r),u),s=new Proxy(m,{set:h,get:o}),d=[...f].reduce((r,i)=>i!=="constructor"&&typeof e[i]=="function"?{...r,[i]:e[i].bind(s)}:r,{});return s[`${t}methods`]=d,s[`${t}onUpdate`]=[],s[`${t}data`]=e,s[`${t}criticalFields`]={},s[`${t}muppet`]={},s[`${t}listeners`]=Object.keys(m).reduce((r,i)=>!i.startsWith(t)&&i!=="__call"?{...r,[i]:new Map}:r,{}),l&&(s[`${t}getter`]=l.bind(s)),n&&(s.__call=n.bind(s)),s}catch(a){console.error("SOURCE OBJECT ERROR: ",a)}};export{E as a};
