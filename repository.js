var U=Object.create;var y=Object.defineProperty,F=Object.defineProperties,D=Object.getOwnPropertyDescriptor,N=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,K=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var v=(i,e,t)=>e in i?y(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,p=(i,e)=>{for(var t in e||(e={}))w.call(e,t)&&v(i,t,e[t]);if(M)for(var t of M(e))V.call(e,t)&&v(i,t,e[t]);return i},T=(i,e)=>F(i,N(e));var O=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),W=(i,e)=>{for(var t in e)y(i,t,{get:e[t],enumerable:!0})},k=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of B(e))!w.call(i,s)&&s!==t&&y(i,s,{get:()=>e[s],enumerable:!(r=D(e,s))||r.enumerable});return i};var I=(i,e,t)=>(t=i!=null?U(K(i)):{},k(e||!i||!i.__esModule?y(t,"default",{value:i,enumerable:!0}):t,i)),L=i=>k(y({},"__esModule",{value:!0}),i);var C=O(R=>{"use strict";var _=require("react");function z(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var q=typeof Object.is=="function"?Object.is:z,Y=_.useState,H=_.useEffect,G=_.useLayoutEffect,J=_.useDebugValue;function Q(i,e){var t=e(),r=Y({inst:{value:t,getSnapshot:e}}),s=r[0].inst,n=r[1];return G(function(){s.value=t,s.getSnapshot=e,b(s)&&n({inst:s})},[i,t,e]),H(function(){return b(s)&&n({inst:s}),i(function(){b(s)&&n({inst:s})})},[i]),J(t),t}function b(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!q(i,t)}catch{return!0}}function X(i,e){return e()}var Z=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?X:Q;R.useSyncExternalStore=_.useSyncExternalStore!==void 0?_.useSyncExternalStore:Z});var P=O((de,j)=>{"use strict";j.exports=C()});var ee={};W(ee,{RepositoryClass:()=>f,repositoryCreator:()=>$});module.exports=L(ee);var d="__PROVIDER_ID__",h=class extends Function{constructor(){super();let e;return e=(...t)=>e.__call(...t),Object.setPrototypeOf(e,new.target.prototype)}},g=class extends h{constructor(t,r,s,n){super();this.__call=t;this.__methods=s;this.__onUpdate=[];this.__listeners={};this.__criticalFields={};this.call=void 0,this.muppet=new Proxy({__init__:r},{get:n.bind(this)});for(let o in r)this.__listeners[o]=new Map,this[o]=r[o]}},x=(i,e,t)=>{function r(n,o){return n[d]&&typeof n[d]=="string"&&o!==n[d]&&o!=="__init__"&&(n[n[d]]=!1,this.__criticalFields[n[d]]=[...this.__criticalFields[n[d]]||[],o]),o==="__init__"?n.__init__:n[o]===void 0?n.__init__[o]:n[o]}function s(n,o,c){return n[o]=c,n.muppet.__init__=T(p({},n.muppet.__init__),{[o]:c}),n.__listeners[o]&&n.__listeners[o].size&&n.__listeners[o].forEach((a,u)=>{n.muppet[u]!==void 0&&n.muppet[u]===!1&&(n.muppet[u]=!0),a()}),Array.isArray(n.__onUpdate)&&o!=="__onUpdate"&&n.__onUpdate.forEach(a=>a&&a(o)),!0}return new Proxy(new g(e,i,t,r),{set:s})};var m=class{constructor(){this.keys=[];this.SPECIAL_KEY=d}init(e,t={}){typeof e=="object"&&!Array.isArray(e)&&(this.keys=Object.keys(e||{}),this.sourceObj=x(e,t.provider,t.methods)),t.broadcastName&&this.createBroadcast(t.broadcastName)}createBroadcast(e="broadcastWatcher"){this.broadcast=new BroadcastChannel(e),this.broadcast.onmessage=({data:t})=>{if(t==="needSome")this.broadcast.postMessage({data:this.get()});else if(t.type===void 0)for(let r in t.data)this.sourceObj[r]=t.data[r];else this.set(t.type,t.data,!0)},this.broadcast.postMessage("needSome")}set(e,t,r=!1){this.sourceObj&&(this.sourceObj[e]=t),this.broadcast&&!r&&this.broadcast.postMessage({type:e,data:t})}get(e){if(this.sourceObj&&e)return this.sourceObj.muppet[e];if(!e)return this.sourceObj.muppet.__init__}watch(e){let t=this.sourceObj.__onUpdate.length;return new Promise(r=>{this.sourceObj.__onUpdate=[...this.sourceObj.__onUpdate,s=>{e===s&&(r(this.sourceObj[e]),this.sourceObj.__onUpdate[t]=null,this.sourceObj.__onUpdate.every(n=>n===null)&&(this.sourceObj.__onUpdate=[]))}]})}watchFor(e,t){let r=this.sourceObj.__onUpdate.length;return new Promise(s=>{this.sourceObj.__onUpdate=[...this.sourceObj.__onUpdate,n=>{e===n&&this.sourceObj[e]===t&&(s(this.sourceObj[e]),this.sourceObj.__onUpdate[r]=null,this.sourceObj.__onUpdate.every(o=>o===null)&&(this.sourceObj.__onUpdate=[]))}]})}},S=(i,e,t,r)=>{let s=new m;return s.init(i,{provider:e,methods:t,broadcastName:r}),s};var l=I(require("react")),E=I(P());function A(i){let e=E.useSyncExternalStore,t=!1,r=l.default.useId?l.default.useId():l.default.useRef(parseInt(String(Math.random()*1e7),10).toString()).current;l.default.useId&&(e=l.default.useSyncExternalStore,t=!0);let s=e(n=>(this.__criticalFields[r]&&this.__criticalFields[r].forEach(o=>{this.__listeners[o]&&typeof this.__listeners[o]!="function"&&this.__listeners[o].set(r,n)}),t?()=>{this.__criticalFields[r]&&(this.muppet[r]=!1,this.__criticalFields[r].forEach(o=>{this.__listeners[o]&&typeof this.__listeners[o]!="function"&&this.__listeners[o].delete(r)}))}:()=>{}),()=>(this.muppet.__PROVIDER_ID__=r,this.muppet[r]===!0?(delete this.muppet.__PROVIDER_ID__,t||(this.muppet[r]=!1),t?this.muppet.__init__:p({},this.muppet)):this.muppet));return l.default.useEffect(()=>()=>{this.muppet[r]&&this.__criticalFields[r]&&(t||this.__criticalFields[r.current].forEach(n=>{this.__listeners[n]&&typeof this.__listeners[n]!="function"&&this.__listeners[n].delete(r.current)}),delete this.__criticalFields[r],delete this.muppet[r])},[]),i!==void 0?s[i]:[s,this.__methods]}var f=class extends h{constructor(t,r){super();this._watcherFactory=t;this._provider=r;this.keys=[];this.actions=this.initRepository()}__call(t,r,s){let n,o=null;return r?(n=(r.constructor.name==="Object"?Object.keys(r):Object.getOwnPropertyNames(Object.getPrototypeOf(r))).reduce((a,u)=>u!=="constructor"&&typeof r[u]=="function"?T(p({},a),{[u]:r[u].bind(r)}):a,{}),r.repo=p({initializeState:this.initializeState,initRepository:this.initRepository},this),r.repo.initializeState(r.repo?p(p({},this.actions.get()),t):t,n,s)):o=this.initRepository(t,n,s),(o||r.repo.actions).sourceObj}initializeState(t,r,s){this.actions=this.initRepository(t,r,s)}initRepository(t,r,s){this.keys=Object.keys(t||{});let n=this.keys.reduce((o,c)=>{let a;return this.actions!==void 0&&this.actions.get(c)!==void 0?a=this.actions.get(c):a=t[c],T(p({},o),{[c]:a})},t||{});return this._watcherFactory(n,this._provider,r,s)}},$=i=>new f(S,i||A);
/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
