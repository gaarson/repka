var u=Object.defineProperty,f=Object.defineProperties,k=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertyNames,_=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var g=(r,t,e)=>t in r?u(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,d=(r,t)=>{for(var e in t||(t={}))h.call(t,e)&&g(r,e,t[e]);if(_)for(var e of _(t))M.call(t,e)&&g(r,e,t[e]);return r},T=(r,t)=>f(r,w(t));var v=(r,t)=>{for(var e in t)u(r,e,{get:t[e],enumerable:!0})},x=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of m(t))!h.call(r,i)&&i!==e&&u(r,i,{get:()=>t[i],enumerable:!(n=k(t,i))||n.enumerable});return r};var O=r=>x(u({},"__esModule",{value:!0}),r);var R={};v(R,{RepositoryService:()=>c});module.exports=O(R);var l=class extends Function{constructor(){super();let t;return t=(...e)=>t.__call(...e),Object.setPrototypeOf(t,new.target.prototype)}};var c=class extends l{constructor(e,n){super();this._watcherFactory=e;this._provider=n;this.keys=[];this.provider=n,this.actions=this.initRepository()}__call(e,n,i){let s,a=null;return n?(s=(n.constructor.name==="Object"?Object.keys(n):Object.getOwnPropertyNames(Object.getPrototypeOf(n))).reduce((o,y)=>y!=="constructor"&&typeof n[y]=="function"?T(d({},o),{[y]:n[y].bind(n)}):o,{}),n.repo||(n.repo=this),n.repo.initializeState(e,s,i)):a=this.initRepository(e,s,i),(a||n.repo.actions).sourceObj}initializeState(e,n,i){this.actions=this.initRepository(e,n,i)}initRepository(e,n,i){this.keys=Object.keys(e||{});let s=this.keys.reduce((a,p)=>{let o;return this.actions!==void 0&&this.actions.get(p)!==void 0?o=this.actions.get(p):o=e[p],T(d({},a),{[p]:o})},e||{});return this._watcherFactory(s,this.provider,n,i)}};
