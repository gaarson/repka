var c=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var O=(p,t)=>{for(var e in t)c(p,e,{get:t[e],enumerable:!0})},m=(p,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of d(t))!h.call(p,r)&&r!==e&&c(p,r,{get:()=>t[r],enumerable:!(n=y(t,r))||n.enumerable});return p};var g=p=>m(c({},"__esModule",{value:!0}),p);var _={};O(_,{Watcher:()=>T,watcherCreator:()=>w});module.exports=g(_);var s="__PROVIDER_ID__",l=class extends Function{constructor(){super();let t;return t=(...e)=>t._call(...e),Object.setPrototypeOf(t,new.target.prototype)}},a=class extends l{constructor(e,n,r){super();this._call=e;this.initObject=n;this.methods=r;this.muppet=new Proxy({},{get(e,n){return e[s]&&typeof e[s]=="string"&&n!==e[s]&&(e[e[s]]?e[e[s]]={...e[e[s]],select:{...e[e[s]].select||{},[n]:e.init[n]||void 0}}:e[e[s]]={select:{[n]:e.init[n]||void 0}}),e[n]?e[n]:e.init[n]}});this.muppet.init=n;for(let i in n)this[i]=n[i]}};var T=class{constructor(){this.SPECIAL_KEY=s}init(t,e,n){typeof t=="object"&&(this.sourceObj=new Proxy(new a(e,Object.keys(t).reduce((r,i)=>({...r,[i]:t[i][0]}),{}),n),{set(r,i,u){r[i]=u,r.muppet.init[i]=u;for(let o in r.muppet)r.muppet[o].__notify__&&r.muppet[o].select.hasOwnProperty(i)&&(r.muppet[o].select={...r.muppet[o].select,[i]:u},r.muppet[o].__notify__());return Array.isArray(r.onUpdate)&&i!=="onUpdate"&&(r.onUpdate.forEach(o=>o()),r.onUpdate=[]),!0}}))}set(t,e){this.sourceObj&&t!=="name"&&t!=="length"&&(this.sourceObj[t]=e)}get(t){if(this.sourceObj&&t)return this.sourceObj[t]}watch(t){return new Promise(e=>{this.sourceObj.onUpdate=[...this.sourceObj.onUpdate,()=>{this.sourceObj[t]&&e(this.sourceObj[t])}]})}watchFor(t,e){return new Promise(n=>{this.sourceObj[t]===e&&n(this.sourceObj[t]),this.sourceObj.onUpdate=[...this.sourceObj.onUpdate,()=>{this.sourceObj[t]===e&&n(this.sourceObj[t])}]})}},w=(p,t,e)=>{let n=new T;return n.init(p,t,e),n};
