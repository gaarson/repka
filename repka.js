var D=Object.create;var y=Object.defineProperty,U=Object.defineProperties,A=Object.getOwnPropertyDescriptor,K=Object.getOwnPropertyDescriptors,V=Object.getOwnPropertyNames,w=Object.getOwnPropertySymbols,W=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var k=(r,e,t)=>e in r?y(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,u=(r,e)=>{for(var t in e||(e={}))v.call(e,t)&&k(r,t,e[t]);if(w)for(var t of w(e))B.call(e,t)&&k(r,t,e[t]);return r},d=(r,e)=>U(r,K(e));var O=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),L=(r,e)=>{for(var t in e)y(r,t,{get:e[t],enumerable:!0})},I=(r,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of V(e))!v.call(r,n)&&n!==t&&y(r,n,{get:()=>e[n],enumerable:!(s=A(e,n))||s.enumerable});return r};var F=(r,e,t)=>(t=r!=null?D(W(r)):{},I(e||!r||!r.__esModule?y(t,"default",{value:r,enumerable:!0}):t,r)),N=r=>I(y({},"__esModule",{value:!0}),r);var S=O(x=>{"use strict";var l=require("react");function z(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var q=typeof Object.is=="function"?Object.is:z,Y=l.useState,H=l.useEffect,G=l.useLayoutEffect,J=l.useDebugValue;function Q(r,e){var t=e(),s=Y({inst:{value:t,getSnapshot:e}}),n=s[0].inst,i=s[1];return G(function(){n.value=t,n.getSnapshot=e,b(n)&&i({inst:n})},[r,t,e]),H(function(){return b(n)&&i({inst:n}),r(function(){b(n)&&i({inst:n})})},[r]),J(t),t}function b(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!q(r,t)}catch{return!0}}function X(r,e){return e()}var Z=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?X:Q;x.useSyncExternalStore=l.useSyncExternalStore!==void 0?l.useSyncExternalStore:Z});var R=O((ye,P)=>{"use strict";P.exports=S()});var ee={};L(ee,{repka:()=>$});module.exports=N(ee);var p="__PROVIDER_ID__",T=class extends Function{constructor(){super();let e;return e=(...t)=>e.__call(...t),Object.setPrototypeOf(e,new.target.prototype)}},g=class extends T{constructor(t,s,n,i){super();this.__call=t;this.__methods=n;this.__onUpdate=[];this.__listeners={};this.call=void 0;for(let a in s)this[a]=s[a];this.muppet=new Proxy({},{get:i.bind(this)})}},M=(r,e,t)=>{function s(n,i){return n[p]&&typeof n[p]=="string"&&i!==n[p]&&(n[n[p]]?n[n[p]]=d(u({},n[n[p]]),{[i]:this[i]!==void 0?this[i]:void 0}):n[n[p]]={[i]:this[i]!==void 0?this[i]:void 0}),n[i]?n[i]:this[i]}return new Proxy(new g(e,r,t,s),{set(n,i,a){if(n[i]=a,n.__listeners[i]&&n.__listeners[i].size)for(let[o,c]of n.__listeners[i])n.muppet[o]&&(n.muppet[o]=d(u({},n.muppet[o]),{[i]:a})),c();return Array.isArray(n.__onUpdate)&&i!=="onUpdate"&&(n.__onUpdate.forEach(o=>o()),n.__onUpdate=[]),!0}})};var f=class extends T{constructor(t,s){super();this._watcherFactory=t;this._provider=s;this.keys=[];this.provider=s,this.actions=this.initRepository()}__call(t,s,n){let i,a=null;return s?(i=(s.constructor.name==="Object"?Object.keys(s):Object.getOwnPropertyNames(Object.getPrototypeOf(s))).reduce((c,h)=>h!=="constructor"&&typeof s[h]=="function"?d(u({},c),{[h]:s[h].bind(s)}):c,{}),s.repo||(s.repo=this),s.repo.initializeState(t,i,n)):a=this.initRepository(t,i,n),(a||s.repo.actions).sourceObj}initializeState(t,s,n){this.actions=this.initRepository(t,s,n)}initRepository(t,s,n){this.keys=Object.keys(t||{});let i=this.keys.reduce((a,o)=>{let c;return this.actions!==void 0&&this.actions.get(o)!==void 0?c=this.actions.get(o):c=t[o],d(u({},a),{[o]:c})},t||{});return this._watcherFactory(i,this.provider,s,n)}};var m=class{constructor(){this.keys=[];this.SPECIAL_KEY=p}init(e,t={}){typeof e=="object"&&!Array.isArray(e)&&(this.keys=Object.keys(e||{}),this.sourceObj=M(e,t.provider,t.methods)),t.broadcastName&&this.createBroadcast(t.broadcastName)}createBroadcast(e="broadcastWatcher"){this.broadcast=new BroadcastChannel(e),this.broadcast.onmessage=({data:t})=>{if(t==="needSome")this.broadcast.postMessage({data:this.get()});else if(t.type===void 0)for(let s in t.data)this.sourceObj[s]=t.data[s];else this.set(t.type,t.data,!0)},this.broadcast.postMessage("needSome")}set(e,t,s=!1){this.sourceObj&&e!=="name"&&e!=="length"&&(this.sourceObj[e]=t),this.broadcast&&!s&&this.broadcast.postMessage({type:e,data:t})}get(e){if(this.sourceObj&&e)return this.sourceObj[e];if(!e)return this.keys.reduce((t,s)=>d(u({},t),{[s]:this.sourceObj[s]}),{})}watch(e){return new Promise(t=>{this.sourceObj.__onUpdate=[...this.sourceObj.__onUpdate,()=>{this.sourceObj[e]&&t(this.sourceObj[e])}]})}watchFor(e,t){return new Promise(s=>{this.sourceObj.__onUpdate=[...this.sourceObj.__onUpdate,()=>{this.sourceObj[e]===t&&s(this.sourceObj[e])}]})}},C=(r,e,t,s)=>{let n=new m;return n.init(r,{provider:e,methods:t,broadcastName:s}),n};var _=require("react"),j=F(R());function E(){let r=(0,_.useRef)(parseInt(String(Math.random()*1e7),10).toString()),e=(0,j.useSyncExternalStore)(t=>{this.muppet[r.current]&&Object.keys(this.muppet[r.current]).forEach(s=>{this.__listeners[s]?this.__listeners[s].set(r.current,t):this.__listeners[s]=new Map([[r.current,t]])})},()=>(this.muppet.__PROVIDER_ID__=r.current,this.muppet[r.current]?(delete this.muppet.__PROVIDER_ID__,this.muppet[r.current]):this.muppet));return(0,_.useEffect)(()=>()=>{this.muppet[r.current]&&(Object.keys(this.muppet[r.current]).forEach(t=>{this.__listeners[t]&&this.__listeners[t].delete(r.current)}),delete this.muppet[r.current])},[]),[e,this.__methods]}var $=new f(C,E);
/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
