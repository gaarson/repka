var I=Object.create;var T=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty;var _=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),D=(n,t)=>{for(var e in t)T(n,e,{get:t[e],enumerable:!0})},g=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of C(t))!E.call(n,i)&&i!==e&&T(n,i,{get:()=>t[i],enumerable:!(r=M(t,i))||r.enumerable});return n};var U=(n,t,e)=>(e=n!=null?I(j(n)):{},g(t||!n||!n.__esModule?T(e,"default",{value:n,enumerable:!0}):e,n)),K=n=>g(T({},"__esModule",{value:!0}),n);var v=_(k=>{"use strict";var c=require("react");function A(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var L=typeof Object.is=="function"?Object.is:A,V=c.useState,W=c.useEffect,F=c.useLayoutEffect,z=c.useDebugValue;function q(n,t){var e=t(),r=V({inst:{value:e,getSnapshot:t}}),i=r[0].inst,o=r[1];return F(function(){i.value=e,i.getSnapshot=t,m(i)&&o({inst:i})},[n,e,t]),W(function(){return m(i)&&o({inst:i}),n(function(){m(i)&&o({inst:i})})},[n]),z(e),e}function m(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!L(n,e)}catch{return!0}}function Y(n,t){return t()}var B=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Y:q;k.useSyncExternalStore=c.useSyncExternalStore!==void 0?c.useSyncExternalStore:B});var S=_((pe,b)=>{"use strict";b.exports=v()});var $={};D($,{repka:()=>H});module.exports=K($);var a="__PROVIDER_ID__",y=class extends Function{constructor(){super();let t;return t=(...e)=>t._call(...e),Object.setPrototypeOf(t,new.target.prototype)}},l=class extends y{constructor(e,r,i){super();this._call=e;this.initObject=r;this.methods=i;this.muppet=new Proxy({},{get(e,r){return e[a]&&typeof e[a]=="string"&&r!==e[a]&&(e[e[a]]?e[e[a]]={...e[e[a]],select:{...e[e[a]].select||{},[r]:e.init[r]||void 0}}:e[e[a]]={select:{[r]:e.init[r]||void 0}}),e[r]?e[r]:e.init[r]}});this.muppet.init=r;for(let o in r)this[o]=r[o]}};var h=class extends y{constructor(e,r){super();this._watcherFactory=e;this._provider=r;this.keys=[];this.provider=r,this.actions=this.initRepository()}_call(e,r,i){let o,p,s=null;return r&&(p=(r.constructor.name==="Object"?Object.keys(r):Object.getOwnPropertyNames(Object.getPrototypeOf(r))).reduce((w,d)=>d!=="constructor"&&typeof r[d]=="function"?{...w,[d]:r[d].bind(r)}:w,{})),r?r.repo?(r.repo.initializeState(e),r.repo.initializeState(e,p)):(r.repo=this,r.repo.initializeState(e),r.repo.initializeState(e,p)):s=this.initRepository(e,p),i&&(o=new BroadcastChannel(`repository-${i}`),o.onmessage=({data:u})=>{u==="needSome"?o.postMessage({data:(s||r.repo.actions).convertToObject()}):u.type===void 0?this.initRepository(u.data):(s||r.repo.actions).set(u.type,u.data)},o.postMessage("needSome")),(s||r.repo.actions).sourceObj}initializeState(e,r){this.actions=this.initRepository(e,r)}initRepository(e,r){this.keys=Object.keys(e||{});let i=this.keys.reduce((o,p)=>{let s;return this.actions!==void 0&&this.actions.get(p)!==void 0?s=this.actions.get(p):s=e[p],{...o,[p]:[s]}},e||{});return this._watcherFactory(i,this.provider,r)}convertToObject(){return this.keys.reduce((e,r)=>({...e,[r]:this.actions.get(r)}),{})}};var f=class{constructor(){this.SPECIAL_KEY=a}init(t,e,r){typeof t=="object"&&(this.sourceObj=new Proxy(new l(e,Object.keys(t).reduce((i,o)=>({...i,[o]:t[o][0]}),{}),r),{set(i,o,p){i[o]=p,i.muppet.init[o]=p;for(let s in i.muppet)i.muppet[s].__notify__&&i.muppet[s].select.hasOwnProperty(o)&&(i.muppet[s].select={...i.muppet[s].select,[o]:p},i.muppet[s].__notify__());return Array.isArray(i.onUpdate)&&o!=="onUpdate"&&(i.onUpdate.forEach(s=>s()),i.onUpdate=[]),!0}}))}set(t,e){this.sourceObj&&t!=="name"&&t!=="length"&&(this.sourceObj[t]=e)}get(t){if(this.sourceObj&&t)return this.sourceObj[t]}watch(t){return new Promise(e=>{this.sourceObj.onUpdate=[...this.sourceObj.onUpdate,()=>{this.sourceObj[t]&&e(this.sourceObj[t])}]})}watchFor(t,e){return new Promise(r=>{this.sourceObj[t]===e&&r(this.sourceObj[t]),this.sourceObj.onUpdate=[...this.sourceObj.onUpdate,()=>{this.sourceObj[t]===e&&r(this.sourceObj[t])}]})}},O=(n,t,e)=>{let r=new f;return r.init(n,t,e),r};var P=require("react"),R=U(S());function x(){let n=(0,P.useRef)(parseInt(String(Math.random()*1e7),10).toString());return[(0,R.useSyncExternalStore)(e=>(this.muppet[n.current]&&(this.muppet[n.current]={...this.muppet[n.current],__notify__:e}),()=>{this.muppet[n.current]&&this.muppet[n.current].__notify__&&delete this.muppet[n.current].__notify__}),()=>(this.muppet.__PROVIDER_ID__=n.current,this.muppet[n.current]?(delete this.muppet.__PROVIDER_ID__,this.muppet[n.current].select):this.muppet)),this.methods]}var H=new h(O,x);
/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
